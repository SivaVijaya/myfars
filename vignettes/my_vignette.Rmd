---
title: "Analysis of FARS data"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{my_vignette}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```
```{r setup}
library(maps)
library(knitr)
```
Overview of the myfars package functions. The data is obtained from the US 
National Highway Traffic Safety Administration's Fatality Analysis Reporting 
System, which is a nationwide census providing the American public yearly data regarding fatal injuries suffered in motor vehicle traffic crashes.

## Reads data files

```{r access_data, eval=FALSE}
data <- accident_2013
tibble::as_tibble(data)
```

The function `fars_read()` read data from the file path provided as an argument.
It returns a `tibble` with loaded data:

```{r use_fars_read,eval = FALSE,results = "hide",warning=FALSE,message=FALSE}
filename <- system.file("extdata/accident_2013.csv.bz2", package = "myfars")
fars_read(filename)
```

The function fars_read_years list the fatality data for each month in the years given. fars_read_years function takes vector of years as inputand selects the 
MONTH and year columns and lists as tibble data.

```{r use_fars_read_years,eval=FALSE}
dat <- fars_read(file)
      dplyr::mutate(dat, year = year) %>%
        dplyr::select(MONTH, year)
```

The function fars_summarize_years gives the total number of fatalities for each 
month of given years.

```{r use_fars_summarize_years, eval = FALSE}
setwd(system.file("extdata", package = "myfars"))
fars_summarize_years(2013:2015)
```

The fars_map_state function plots the fatality data of the state for a given 
year.

```{r use_fars_mape_state,fig.align='center',fig.height=2,fig.width=2,eval = FALSE}
setwd(system.file("extdata", package = "myfars"))
fars_map_state(12, 2013)
```
